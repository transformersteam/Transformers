
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>目标管理</title>
    <link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
</head>
<body>
    <div id="goaltree" style="float:left">
        <ul id="ztree" class="ztree"></ul>
    </div>
    <div>
        <div class="panel-heading">目标详情</div>
        <table class="table table-bordered table-striped text-center">
            <tr>
                <td>指标名称</td>
                <td>指标单位</td>
                <td>主治标</td>
            </tr>
            <tr>
                <td>指标类型</td>
                <td>指标类别</td>
                <td>指标等级</td>
            </tr>
            <tr>
                <td>反馈频次</td>
            </tr>
            <tr>
                <td>开始时间</td>
                <td>完成时间</td>
                <td>周期</td>
            </tr>
            <tr>
                <td>责任单位</td>
                <td>责任人</td>
                <td>考核权重</td>
            </tr>
            <tr>
                <td>填报人</td>
                <td>协办人</td>
                <td></td>
            </tr>
            <tr>
                <td>计算公式/评价标准</td>
                <td colspan="3"></td>
            </tr>
            <tr>
                <td>数据来源</td>
                <td colspan="3"></td>
            </tr>
            <tr>
                <td>支持表格</td>
                <td colspan="3"></td>
            </tr>
        </table>
    </div>
    <div>
        <div class="panel-heading">指标分解</div>
        <table class="table table-bordered table-striped text-center">
            <tr>
                <td>月份</td>
                <td>1月</td>
                <td>1-2月</td>
                <td>1-3月</td>
                <td>1-4月</td>
                <td>1-5月</td>
                <td>1-6月</td>
                <td>1-7月</td>
                <td>1-8月</td>
                <td>1-9月</td>
                <td>1-10月</td>
                <td>1-11月</td>
                <td>年度目标</td>
            </tr>
            <tr>
                <td>目标值</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
                <td>月份</td>
            </tr>
        </table>
    </div>
    <div>
        <div class="panel-heading">反馈确认</div>
        <div style="padding:20px,5px,20px,5px">
            确认流程
        </div>
        <div>
            <span>郭莱(模块运营总经理)</span>
            <span>明和(单位一把手)</span>
            <span>柯振亮(集团运营负责人)</span>
            <span>王振华(督办领导)</span>
        </div>
    </div>
    <div style="float:right">
        <input id="Button1" type="button" value="设置关注人" />&nbsp;&nbsp;
        <input id="Button1" type="button" value="指标删除" />&nbsp;&nbsp;
        <input id="Button1" type="button" value="指标调整" />
    </div>
</body>
</html>
<script>
        var setting = {
                view: {
                    dblClickExpand: false,//双击节点时，是否自动展开父节点的标识
                    showLine: true,//是否显示节点之间的连线
                    fontCss: { 'color': 'black', 'font-weight': 'bold' },//字体样式函数
                    selectedMulti: true, //设置是否允许同时选中多个节点
                },
                check: {
                    //chkboxType: { "Y": "ps", "N": "ps" },
                    chkboxType: { "Y": "", "N": "" },
                    chkStyle: "checkbox",//复选框类型
                    enable: true //每个节点上是否显示 CheckBox
                },
                //增删改，移动复制
                edit: {
                    enable: true, //如果enable为flase，那么树就不能移动了
                    showRemoveBtn: false, //是否显示树的删除按钮
                    showRenameBtn: false, //是否显示数的重命名按钮
                    isSimpleData: true, //数据是否采用简单 Array 格式，默认false
                    treeNodeKey: "id",  //在isSimpleData格式下，当前节点id属性
                    treeNodeParentKey: "parentId",//在isSimpleData格式下，当前节点的父节点id属性
                    showLine: true, //是否显示节点间的连线
                    removeTitle: "删除节点",//删除Logo的提示
                    renameTitle: "编辑节点",//修改Logo的提示
                    //拖拽
                    drag: {
                        isCopy: true,//能够复制
                        isMove: true,//能够移动
                        prev: false,//不能拖拽到节点前
                        next: false,//不能拖拽到节点后
                        inner: true//只能拖拽到节点中
                    }
                },
                data: {
                    simpleData: {//简单数据模式
                        enable: true,
                        idKey: "id",
                        pIdKey: "pId",
                        rootPId: null
                    }
                },
                callback: {
                    beforeExpand: zTreeBeforeExpand, // 用于捕获父节点展开之前的事件回调函数，并且根据返回值确定是否允许展开操作
                    //单击事件
                    onClick: zTreeOnClick
                }
    };

        //获取结点
    function getGoalList() {
        $.ajax({
            url: "https://localhost:8888/api/Organization/GetRolesRList",
            async: false,
            success: function (data) {
                var json = eval(data); // 数组
                zNodes = "[";
                $.each(json, function (index, item) {
                    if (json[index].rolePid == 0) {
                        zNodes += "{id:" + json[index].roleId
                            + ",pId:" + json[index].rolePid
                            + ",name:'" + json[index].roleName
                            + "',open:true}";
                    }
                    else {
                        zNodes += "{id:" + json[index].roleId
                            + ",pId:" + json[index].rolePid
                            + ",name:'" + json[index].roleName
                            + "'}";
                    }
                    if (index != json.length - 1)
                        zNodes += ",";
                });
                zNodes += "]";
                zNodes = eval(zNodes);
                zTreeObj = $.fn.zTree.init($("#regionZTree"),setting, zNodes);
            },
            error: function (e) {
            }
        });
    };
</script>