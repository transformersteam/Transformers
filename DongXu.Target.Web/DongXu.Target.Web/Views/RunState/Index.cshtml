
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>运行情况</title>
    <script src="~/js/jquery-3.3.1.js"></script>
    <script src="~/js/vue.js"></script>             @*vue*@
    <script src="~/js/axios.js"></script>
    <script src="~/js/echarts.min.js"></script>    @*Echarts图*@
    <link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />


    @*选项卡*@
    <link href="https://cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/jquery.scrollbar/0.2.11/jquery.scrollbar.min.css" rel="stylesheet">
    <link href="~/ntabs/css/nth-tabs.css" rel="stylesheet" />
    <script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery.scrollbar/0.2.11/jquery.scrollbar.min.js"></script>
    <script src="~/ntabs/js/nth-tabs.js"></script>


</head>
<body>
    <div style="padding:20px;" id="app">
        <div class="panel panel-primary" style="height:600px">
            <div class="panel-heading">运行情况</div>
            <div id="condition" style="float:left;width:900px;height:350px;margin-left:30px;padding-top:15px;padding-right:20px">

            </div>
            <div style="margin:0 auto">
                <table style="" class="table table-bordered table-striped text-center">
                    <thead>
                        <tr>
                            <td>目标状态</td>
                            <td>数量</td>
                            <td>比例</td>
                            <td>说明</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="data in condition" class="data-row">
                            <td>{{data.goalState_Name}}</td>
                            <td>{{data.count}}</td>
                            <td>{{data.percent}}%</td>
                            <td>{{data.goalState_Explain}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    
        <div class="page-wrapper">
            <!--使用时只需此标签，class固定,id自己定义-->
            <div style="height:1000px" class="nth-tabs" id="main-tabs">
            </div>
        </div>
        <table>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
            </tr>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
            </tr>
        </table>

        

</body>
</html>
<script type="module">
    var vm = new Vue({
        el: "#app",
        data: {
            condition: [],
        },
        mounted() {   //钩子函数
            getCondition();        //运行情况
            this.getRunCondition();     //运行情况表格
        },
        methods: {
            getRunCondition: function () {     //运行情况
                axios.get('@Url.Action("GetRunCondition","WaitRead")').then(
                    (response) => {
                        this.condition = response.data   //运行情况表格显示
                        console.log(condition)
                    }
                )
            }
        }
    })

    //运行情况
    function getCondition() {
        var dataname = [];
        var datacount = [];
        var runCondition = echarts.init(document.getElementById('condition'))
        $.ajax({
            url: "/WaitRead/GetEchartRunCondition",
            type: "get",
            dataType:"json",
            success: function (data) {
                for (var i = 0; i < data.dataname.length; i++) {
                    dataname.push(data.dataname[i]);
                }
                for (var i = 0; i < data.datacount.length; i++) {
                    datacount.push(data.datacount[i]);
                }
                    var option = {
                            title : {
                                text: '运行情况',
                                x:'center'
                            },
                            tooltip : {
                                trigger: 'item',
                                formatter: "{a} <br />{b} : {c} ({d}%)"
                            },
                            legend: {
                                orient: 'vertical',
                                left: 'left',
                                data: dataname
                            },
                            series : [
                                {
                                    name: '访问来源',
                                    type: 'pie',
                                    radius : '55%',
                                    center: ['50%', '60%'],
                                    data: [
                                        { "value": datacount[0], "name": dataname[0] },
                                        { "value": datacount[1], "name": dataname[1] },
                                        { "value": datacount[2], "name": dataname[2] },
                                        { "value": datacount[3], "name": dataname[3] },
                                        { "value": datacount[4], "name": dataname[4] },
                                    ],
                                    itemStyle: {
                                        emphasis: {
                                            shadowBlur: 10,
                                            shadowOffsetX: 0,
                                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                                        }
                                    }
                                }
                            ]
                        };
                        runCondition.setOption(option);
                    }
                })
            }
</script>

<script>




    var nthTabs;

    $(function () {

        //一个低门槛的演示,更多需求看源码

        //基于bootstrap tab的自定义多标签的jquery实用插件
        nthTabs = $("#main-tabs").nthTabs();



        // 批量新建示例
        nthTabs.addTabs([
            {
                id: 'user-manage',
                title: '用户管理',
                active: false,
                content: '这是用户管理页面~'
            },
            {
                id: 'permission-manage',
                title: '权限管理',
                active: false,
               // url: '<partial name="~/Views/RunState/TableResult.cshtml"/>'
                content: '@await Html.PartialAsync("TableResult")'
            }
        ]);

        // 连贯操作示例
        nthTabs.addTab({
            id: 'menu-manage',
            title: '菜单管理',
            active: false,
            content: '这是菜单管理页面~'
        }).addTab({
            id: 'role-manage',
            title: '角色管理',
            active: false,
            content: '这是角色管理页面~'
        });









        // 选项卡切换事件处理器
        nthTabs.tabToggleHandler(function (data) {
            console.log(data);
        });

    });
</script>